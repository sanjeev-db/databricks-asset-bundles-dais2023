# yaml-language-server: $schema=bundle_config_schema.json
bundle:
  name: medium_post_report

include:
  - "*.yml" 
  - "*/*.yml"
  #- ./rhelp_resources.yml
  #- ./common_variables.yml
  #- ./outbound/outbound_resources.yml
 

workspace:
  #host: https://e2-dogfood.staging.cloud.databricks.com/
  host: https://adb-2701504584282370.10.azuredatabricks.net
            

environments:
  development:
    default: true
    resources:
      pipelines:
        medium_metrics_pipeline:
          development: true

  qa: # This environment is when deploying test runs from a pull request on GitHub...
    workspace:
      #host: https://e2-demo-west.cloud.databricks.com/
      #host: https://adb-2701504584282370.10.azuredatabricks.net
      #host: https://e2-dogfood.staging.cloud.databricks.com/
      host: https://e2-demo-field-eng.cloud.databricks.com/
    resources:
      pipelines:
        medium_metrics_pipeline:
          development: true
          permissions:
            - level: CAN_VIEW
              group_name: users      

  production:
    workspace:
      #host: https://e2-demo-west.cloud.databricks.com/
      #host: https://adb-2701504584282370.10.azuredatabricks.net
      #host: https://e2-dogfood.staging.cloud.databricks.com/
      host: https://e2-demo-field-eng.cloud.databricks.com/
    resources:
      pipelines:
        medium_metrics_pipeline:
          permissions:
          - level: CAN_VIEW
            group_name: users
          development: false
          photon: true
          clusters:
            - autoscale:
                min_workers: 2
                max_workers: 8